# ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„ - AquaERP

**Ø§Ù„ØªØ§Ø±ÙŠØ®:** Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹:** Ø®Ø¨ÙŠØ± ØªÙ‚Ù†ÙŠ ÙˆÙ…Ø¨Ø±Ù…Ø¬ Ù…Ø­ØªØ±Ù  
**Ø§Ù„Ù‡Ø¯Ù:** Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ¬ÙˆØ§Øª ÙˆØ§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ ÙˆØ¶Ø¹ ØªØµÙˆØ± Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ](#Ø§Ù„Ù…Ù„Ø®Øµ-Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ)
2. [Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚](#Ø§Ù„ÙˆØ¶Ø¹-Ø§Ù„Ø­Ø§Ù„ÙŠ-Ù„Ù„ØªØ·Ø¨ÙŠÙ‚)
3. [ğŸ”´ Ø§Ù„ÙØ¬ÙˆØ§Øª Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù„Ù„Ù€ SaaS](#-Ø§Ù„ÙØ¬ÙˆØ§Øª-Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©-Ù„Ù„-saas)
4. [ğŸ“‹ ÙˆØ«ÙŠÙ‚Ø© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ (PRD) - AquaERP SaaS Module](#-ÙˆØ«ÙŠÙ‚Ø©-Ù…ØªØ·Ù„Ø¨Ø§Øª-Ø§Ù„Ù…Ù†ØªØ¬-prd---aquaerp-saas-module)
5. [ğŸš¨ Ø§Ù„ÙØ¬ÙˆØ§Øª ÙˆØ§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©](#-Ø§Ù„ÙØ¬ÙˆØ§Øª-ÙˆØ§Ù„ØµÙØ­Ø§Øª-ØºÙŠØ±-Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©)
6. [âš¡ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ÙƒÙØ§Ø¡Ø©](#-Ù…Ø´Ø§ÙƒÙ„-Ø§Ù„Ø£Ø¯Ø§Ø¡-ÙˆØ§Ù„ÙƒÙØ§Ø¡Ø©)
7. [ğŸ”’ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ù…Ø§Ù†](#-Ù…Ø´Ø§ÙƒÙ„-Ø§Ù„Ø£Ù…Ø§Ù†)
8. [ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª](#-Ø§Ù„ØªÙˆØµÙŠØ§Øª-ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª)
9. [ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©](#-Ø®Ø·Ø©-Ø§Ù„ØªØ·ÙˆÙŠØ±-Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©)

---

## ğŸ“Œ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ

### Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©

- **Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ (Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©):** ~75%
- **Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ (Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS):** ~20% âŒ
- **Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Infrastructure):** âœ… Ù…ÙƒØªÙ…Ù„Ø© Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯
- **Backend API:** âœ… Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø³Ø¨Ø© 85%
- **Frontend:** âš ï¸ Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø³Ø¨Ø© 70% (Ø¨Ø¹Ø¶ Ø§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©)
- **Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS:** âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© (Super Admin, Subscriptions, Billing)
- **Ø§Ù„ØªÙƒØ§Ù…Ù„:** âš ï¸ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†
- **Ø§Ù„Ø£Ø¯Ø§Ø¡:** âš ï¸ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†
- **Ø§Ù„Ø£Ù…Ø§Ù†:** âš ï¸ ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø²ÙŠØ² (RBAC ØºÙŠØ± Ù…ÙƒØªÙ…Ù„)

### Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆÙŠØ©

âœ… Ø¨Ù†ÙŠØ© Multi-tenancy Ù‚ÙˆÙŠØ© ÙˆÙ…Ø­ÙƒÙ…Ø©  
âœ… API Ù…Ù†Ø¸Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Django Ninja  
âœ… Frontend Ø­Ø¯ÙŠØ« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… React + TypeScript  
âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© JWT Ø¬Ø§Ù‡Ø²  
âœ… Ø¯Ø¹Ù… RTL ÙƒØ§Ù…Ù„  

### Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹ÙŠÙØ©

âŒ **ØºÙŠØ§Ø¨ Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS** (Super Admin DashboardØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§ØªØŒ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹)  
âŒ Ø¨Ø¹Ø¶ Ø§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø© (Farm, Settings)  
âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ù…Ù„Ø©  
âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¯Ø§Ø¡ (Caching, Lazy Loading)  
âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø©  
âŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©  
âŒ **Ù†Ø¸Ø§Ù… RBAC ØºÙŠØ± Ù…ÙƒØªÙ…Ù„** (Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©)  
âŒ **Ø§Ù„ØªÙˆØ·ÙŠÙ† (i18n) ØºÙŠØ± ÙƒØ§Ù…Ù„** (ÙŠÙ‚ØªØµØ± Ø¹Ù„Ù‰ RTL ÙÙ‚Ø·)  
âŒ **CI/CD Pipeline ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯**  
âŒ **ØªÙƒØ§Ù…Ù„ ZATCA ØºÙŠØ± Ù…ÙƒØªÙ…Ù„** (ÙŠØ­ØªØ§Ø¬ Signing & Reporting ÙƒØ§Ù…Ù„)  

---

## ğŸ” Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚

### 1. Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Infrastructure)

#### âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡

- Docker Compose Ù…Ø¹ PostgreSQL 16
- Redis Ù„Ù„Ù€ Caching Ùˆ Celery
- Celery + Celery Beat Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©
- Multi-tenancy Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… django-tenants
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Django Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

#### âš ï¸ Ù…Ø§ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†

- **Nginx Configuration:** ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- **Gunicorn:** ØºÙŠØ± Ù…ÙØ¹Ø¯ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- **SSL/TLS:** ØºÙŠØ± Ù…ÙØ¹Ø¯
- **Backup Strategy:** ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©
- **Monitoring:** ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯

### 2. Backend API

#### âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡

- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (JWT) âœ…
- API Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Login, Refresh, Me) âœ…
- API Ù„Ù„Ø£Ø­ÙˆØ§Ø¶ (Ponds) âœ…
- API Ù„Ù„Ø¯ÙØ¹Ø§Øª (Batches) âœ…
- API Ù„Ù„Ù…Ø®Ø²ÙˆÙ† (Inventory) âœ…
- API Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Operations) âœ…
- API Ù„Ù„Ù…Ø­Ø§Ø³Ø¨Ø© (Accounting) âœ…
- API Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Sales) âœ…
- API Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± (Reports) âœ…
- API Ù„Ù€ ZATCA âœ…
- API Ù„Ù„ØªØ¯Ù‚ÙŠÙ‚ (Audit) âœ…

#### âš ï¸ Ù…Ø§ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†

- **Error Handling:** Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ù…ÙˆØ­Ø¯Ø©
- **Validation:** ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†
- **Pagination:** Ø¨Ø¹Ø¶ Ø§Ù„Ù€ APIs Ù„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Pagination
- **Rate Limiting:** ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
- **API Versioning:** ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
- **Documentation:** Swagger Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† ÙŠØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ«

### 3. Frontend Pages

#### âœ… Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©

1. **Login** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
2. **Dashboard** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ Charts
3. **Ponds** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ CRUD
4. **Batches** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ CRUD
5. **Inventory** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ CRUD
6. **DailyOperations** âœ… - Ù…ÙƒØªÙ…Ù„Ø©
7. **Accounting** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ Tabs
8. **Harvests** âœ… - Ù…ÙƒØªÙ…Ù„Ø©
9. **SalesOrders** âœ… - Ù…ÙƒØªÙ…Ù„Ø©
10. **Invoices** âœ… - Ù…ÙƒØªÙ…Ù„Ø©
11. **Reports** âœ… - Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø¹ Charts
12. **AuditLogs** âœ… - Ù…ÙƒØªÙ…Ù„Ø©
13. **BiologicalAssetRevaluations** âœ… - Ù…ÙƒØªÙ…Ù„Ø©

#### âŒ Ø§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©

1. **Farm** âŒ - ØµÙØ­Ø© ÙØ§Ø±ØºØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ (ÙÙ‚Ø· Ø±Ø³Ø§Ù„Ø© "Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±")
2. **Settings** âš ï¸ - Ù…ÙƒØªÙ…Ù„Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹ (Ø¹Ø±Ø¶ ÙÙ‚Ø·ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„)

---

## ğŸ”´ Ø§Ù„ÙØ¬ÙˆØ§Øª Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù„Ù„Ù€ SaaS

> **Ù…Ù„Ø§Ø­Ø¸Ø© Ø­Ø±Ø¬Ø©:** Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ØµÙ„ÙŠ Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© (Operational) Ù„ÙƒÙ†Ù‡ Ø£ØºÙÙ„ Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ù„Ù…Ù†ØªØ¬ SaaS. Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… ÙŠØºØ·ÙŠ Ø§Ù„ÙØ¬ÙˆØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ ÙƒÙ…Ù†ØµØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†.

### 1. ØºÙŠØ§Ø¨ Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS (SaaS Management Layer) âŒ

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ØªÙ…Ø§Ù…Ø§Ù‹

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒÙ€ "ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ ÙˆØ§Ø­Ø¯" ÙˆÙ„ÙŠØ³ "Ù…Ù†ØµØ© SaaS Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†". Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¢Ù„ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø©:
- Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (Tenants)
- Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„Ø®Ø·Ø· (Subscriptions & Plans)
- Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (Payment Gateways)
- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

#### Ø£. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin (Ù…Ù†ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Dashboard Ù„Ø¹Ø±Ø¶:
  - Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
  - Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ/Ø§Ù„Ø³Ù†ÙˆÙŠ
  - Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª
  - Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Active Users, API Calls)
  - Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª (Active, Trial, Past Due, Cancelled)

- Ø¥Ø¯Ø§Ø±Ø© Tenants:
  - Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø´Ø±ÙƒØ§Øª
  - ØªØ¬Ù…ÙŠØ¯/ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
  - Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ ÙƒÙ„ Ø´Ø±ÙƒØ©
  - Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# Public Schema Models (tenants/models.py)
class Plan(models.Model):
    name = models.CharField(max_length=100)
    name_ar = models.CharField(max_length=100)
    price_monthly = models.DecimalField(max_digits=10, decimal_places=2)
    price_yearly = models.DecimalField(max_digits=10, decimal_places=2)
    
    # Quotas (Ø§Ù„Ù‚ÙŠÙˆØ¯)
    max_ponds = models.IntegerField(default=10)
    max_users = models.IntegerField(default=5)
    max_batches = models.IntegerField(default=50)
    features = models.JSONField(default=dict)  # {'reports': True, 'accounting': True}
    
    is_active = models.BooleanField(default=True)

class Subscription(models.Model):
    tenant = models.OneToOneField(Client, on_delete=models.CASCADE)
    plan = models.ForeignKey(Plan, on_delete=models.PROTECT)
    
    status = models.CharField(max_length=20, choices=[
        ('trial', 'ØªØ¬Ø±ÙŠØ¨ÙŠ'),
        ('active', 'Ù†Ø´Ø·'),
        ('past_due', 'Ù…ØªØ£Ø®Ø±'),
        ('cancelled', 'Ù…Ù„ØºÙŠ'),
    ])
    
    trial_ends_at = models.DateTimeField(null=True, blank=True)
    current_period_start = models.DateTimeField()
    current_period_end = models.DateTimeField()
    
    stripe_subscription_id = models.CharField(max_length=255, blank=True)
    payment_method = models.CharField(max_length=50, default='stripe')
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

#### Ø¨. Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØªØ±Ø© (Billing Engine)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹:
  - **Stripe** (Ù„Ù„Ø¹Ø§Ù„Ù…ÙŠ)
  - **Moyasar** Ø£Ùˆ **PayTabs** (Ù„Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ)
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
- Ù…Ø¹Ø§Ù„Ø¬Ø© ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹
- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ¬Ø±Ø¨Ø©

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# api/billing.py
from ninja import Router
from django.conf import settings
import stripe

router = Router()

@router.post('/create-checkout-session', auth=TokenAuth())
def create_checkout_session(request, plan_id: int):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¯ÙØ¹ Ù…Ø¹ Stripe"""
    plan = Plan.objects.get(id=plan_id)
    tenant = request.tenant
    
    checkout_session = stripe.checkout.Session.create(
        customer_email=tenant.email,
        payment_method_types=['card'],
        line_items=[{
            'price_data': {
                'currency': 'sar',
                'product_data': {
                    'name': plan.name_ar,
                },
                'unit_amount': int(plan.price_monthly * 100),
            },
            'quantity': 1,
        }],
        mode='subscription',
        success_url=f'{settings.FRONTEND_URL}/billing/success',
        cancel_url=f'{settings.FRONTEND_URL}/billing/cancel',
        metadata={
            'tenant_id': tenant.id,
            'plan_id': plan.id,
        }
    )
    
    return {'checkout_url': checkout_session.url}
```

#### Ø¬. Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Subscription Lifecycle)

**Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
1. **Trial (ØªØ¬Ø±ÙŠØ¨ÙŠ):** 14-30 ÙŠÙˆÙ… Ù…Ø¬Ø§Ù†ÙŠ
2. **Active (Ù†Ø´Ø·):** Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¯ÙÙˆØ¹ Ù†Ø´Ø·
3. **Past Due (Ù…ØªØ£Ø®Ø±):** ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹ - ØªØ¬Ù…ÙŠØ¯ Ø¬Ø²Ø¦ÙŠ
4. **Cancelled (Ù…Ù„ØºÙŠ):** Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ - Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù…Ø¯Ø© Ù…Ø­Ø¯Ø¯Ø©

**Middleware Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:**
```python
# tenants/aqua_core/middleware.py
class SubscriptionMiddleware:
    def __call__(self, request):
        if request.tenant and not request.path.startswith('/api/saas/'):
            subscription = getattr(request.tenant, 'subscription', None)
            
            if not subscription or subscription.status == 'cancelled':
                return JsonResponse(
                    {'error': 'Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ØºÙŠØ± Ù†Ø´Ø·'},
                    status=403
                )
            
            if subscription.status == 'past_due':
                # Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·ØŒ Ù…Ù†Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø©
                if request.method in ['POST', 'PUT', 'DELETE']:
                    return JsonResponse(
                        {'error': 'Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù…ØªØ£Ø®Ø± - ÙŠØ±Ø¬Ù‰ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¯ÙØ¹'},
                        status=403
                    )
        
        return self.get_response(request)
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ **Ø­Ø±Ø¬Ø© Ø¬Ø¯Ø§Ù‹** - Ø¨Ø¯ÙˆÙ†Ù‡Ø§ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¨ÙŠØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒÙ€ SaaS

---

### 2. Ø§Ù„ØªÙˆØ·ÙŠÙ† ÙˆØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª (Internationalization) âš ï¸

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** âš ï¸ ÙŠÙ‚ØªØµØ± Ø¹Ù„Ù‰ RTL ÙÙ‚Ø· - **ØºÙŠØ± ÙƒØ§ÙÙ Ù„Ù…Ù†ØªØ¬ SaaS**

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
- Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ØµÙ„ÙŠ ÙŠØ°ÙƒØ± "Ø¯Ø¹Ù… RTL ÙƒØ§Ù…Ù„" Ù„ÙƒÙ†Ù‡ Ù„Ø§ ÙŠØºØ·ÙŠ:
  - Ø¢Ù„ÙŠØ© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© (i18n)
  - ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ (Hardcoded vs JSON)
  - Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙÙˆØ±ÙŠ Ø£Ù… ÙŠØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
  - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ© (Database)

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

#### Ø£. Frontend i18n (react-i18next)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Ø§Ø³ØªØ®Ø¯Ø§Ù… `react-i18next` Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø©
- Ù…Ù„ÙØ§Øª JSON Ù…Ù†ÙØµÙ„Ø© Ù„Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
- ØªØ¨Ø¯ÙŠÙ„ ÙÙˆØ±ÙŠ Ù„Ù„ØºØ© Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
- ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø© (RTL/LTR) ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```typescript
// frontend/src/i18n/config.ts
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import ar from './locales/ar.json'
import en from './locales/en.json'

i18n.use(initReactI18next).init({
  resources: {
    ar: { translation: ar },
    en: { translation: en },
  },
  lng: localStorage.getItem('language') || 'ar',
  fallbackLng: 'ar',
  interpolation: {
    escapeValue: false,
  },
})

// ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø©
i18n.on('languageChanged', (lng) => {
  document.documentElement.dir = lng === 'ar' ? 'rtl' : 'ltr'
  document.documentElement.lang = lng
  localStorage.setItem('language', lng)
})

// frontend/src/components/common/LanguageSwitcher.tsx
const { t, i18n } = useTranslation()

const toggleLanguage = () => {
  const newLang = i18n.language === 'en' ? 'ar' : 'en'
  i18n.changeLanguage(newLang)
}
```

#### Ø¨. Backend i18n (Django Translation)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØªÙØ¹ÙŠÙ„ Django Translation Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£
- ØªØ±Ø¬Ù…Ø© Ø±Ø³Ø§Ø¦Ù„ API Response
- Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© ÙÙŠ Ø§Ù„Ù€ API Headers

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# settings.py
MIDDLEWARE = [
    # ...
    'django.middleware.locale.LocaleMiddleware',
    # ...
]

LANGUAGES = [
    ('ar', 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'),
    ('en', 'English'),
]

LOCALE_PATHS = [
    os.path.join(BASE_DIR, 'locale'),
]

# api/response.py
from django.utils.translation import gettext_lazy as _

class ErrorResponse(BaseModel):
    detail: str
    
    @classmethod
    def from_exception(cls, exception, language='ar'):
        if language == 'ar':
            return cls(detail=str(exception))
        else:
            return cls(detail=_('An error occurred'))
```

#### Ø¬. Database i18n (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ©)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Ù‡Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£ØµÙ†Ø§Ù/Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ØªØ­ØªØ§Ø¬ Ø£Ù† ØªÙƒÙˆÙ† Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ©ØŸ
- Ù…Ø«Ø§Ù„: `name_ar` Ùˆ `name_en` ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø¬Ø¯ÙˆÙ„

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# biological/models.py
class Species(models.Model):
    name_ar = models.CharField(max_length=200)
    name_en = models.CharField(max_length=200, blank=True)
    
    def get_name(self, language='ar'):
        return self.name_ar if language == 'ar' else (self.name_en or self.name_ar)
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¡ **Ù…ØªÙˆØ³Ø·Ø©** - Ù…Ù‡Ù…Ø© Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙƒÙ† Ù„ÙŠØ³Øª Ø­Ø±Ø¬Ø© Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚

---

### 3. Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Advanced RBAC) âš ï¸

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** âš ï¸ Ù…ØµØ§Ø¯Ù‚Ø© Ø£Ø³Ø§Ø³ÙŠØ© ÙÙ‚Ø· - **ØºÙŠØ± ÙƒØ§ÙÙ Ù„Ù†Ø¸Ø§Ù… ERP**

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
- Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ØµÙ„ÙŠ ÙŠØ°ÙƒØ± Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Authentication) Ù„ÙƒÙ†Ù‡ ÙŠÙ‡Ù…Ø´ Ø§Ù„ØªÙÙˆÙŠØ¶ (Authorization)
- ÙÙŠ Ø£Ù†Ø¸Ù…Ø© ERPØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù†Ø¸Ø§Ù… Ø£Ø¯ÙˆØ§Ø± Ø¯Ù‚ÙŠÙ‚:
  - Ù…Ø¯ÙŠØ± (Admin)
  - Ù…Ø­Ø§Ø³Ø¨ (Accountant)
  - Ù…Ù‡Ù†Ø¯Ø³ Ù…ÙˆÙ‚Ø¹ (Site Engineer)
  - Ø¹Ø§Ù…Ù„ (Worker)
- ÙƒÙ„ Ø¯ÙˆØ± ÙŠØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

#### Ø£. Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (Role Management)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ù…Ø¯ÙŠØ± (Tenant Admin) Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø¯ÙˆØ§Ø± Ù…Ø®ØµØµØ©
- Ø£Ø¯ÙˆØ§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (Default Roles)
- ØªØ®ØµÙŠØµ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„ÙƒÙ„ Ø¯ÙˆØ±

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# accounts/models.py
class Role(models.Model):
    """Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"""
    tenant = models.ForeignKey(Client, on_delete=models.CASCADE, null=True, blank=True)
    # null = Ø¯ÙˆØ± Ø§ÙØªØ±Ø§Ø¶ÙŠ (global), not null = Ø¯ÙˆØ± Ù…Ø®ØµØµ Ù„Ù„Ù€ tenant
    
    name = models.CharField(max_length=100)
    name_ar = models.CharField(max_length=100)
    description = models.TextField(blank=True)
    
    is_system_role = models.BooleanField(default=False)  # Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°ÙÙ‡Ø§
    
    permissions = models.JSONField(default=dict)  # {'ponds.view': True, 'ponds.create': False}
    
    created_at = models.DateTimeField(auto_now_add=True)

class User(AbstractUser):
    role = models.ForeignKey(Role, on_delete=models.SET_NULL, null=True)
    tenant = models.ForeignKey(Client, on_delete=models.CASCADE)
    
    def has_permission(self, permission: str) -> bool:
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"""
        if not self.role:
            return False
        
        # Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© ÙƒÙ€ {'module.action': True/False}
        return self.role.permissions.get(permission, False)
```

#### Ø¨. Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© (Granular Permissions)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØµÙ„Ø§Ø­ÙŠØ§Øª Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆØ­Ø¯Ø© (Module) ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡ (Action)
- Ù…Ø«Ø§Ù„: `ponds.view`, `ponds.create`, `ponds.edit`, `ponds.delete`
- Ù…Ø«Ø§Ù„: `reports.view`, `reports.export` (ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù„ÙƒÙ† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØµØ¯ÙŠØ±Ù‡Ø§)

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# api/permissions.py
from functools import wraps
from ninja import Router

def require_permission(permission: str):
    """Decorator Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"""
    def decorator(func):
        @wraps(func)
        def wrapper(request, *args, **kwargs):
            if not request.auth:
                return 401, ErrorResponse(detail="ØºÙŠØ± Ù…ØµØ±Ø­")
            
            if not request.auth.has_permission(permission):
                return 403, ErrorResponse(detail="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡")
            
            return func(request, *args, **kwargs)
        return wrapper
    return decorator

# api/ponds.py
@router.post('/', response={201: PondSchema}, auth=TokenAuth())
@require_permission('ponds.create')
def create_pond(request, data: PondCreateSchema):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø­ÙˆØ¶ - ÙŠØªØ·Ù„Ø¨ ØµÙ„Ø§Ø­ÙŠØ© ponds.create"""
    # ...
```

#### Ø¬. Audit Trail Ù…Ø¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØªØ³Ø¬ÙŠÙ„ Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆÙ…ØªÙ‰
- Ø±Ø¨Ø· Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø¨Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
- ØªØªØ¨Ø¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# audit/utils.py
def log_action(action_type, entity_type, entity_id, user, permission_used=None):
    """ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù…Ø¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©"""
    AuditLog.objects.create(
        action_type=action_type,
        entity_type=entity_type,
        entity_id=entity_id,
        user=user,
        permission_used=permission_used,  # 'ponds.edit'
        description=f"{user.full_name} Ù‚Ø§Ù… Ø¨Ù€ {action_type} Ø¹Ù„Ù‰ {entity_type}",
    )
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ **Ø¹Ø§Ù„ÙŠØ©** - Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù†Ø¸Ø§Ù… ERP Ø§Ø­ØªØ±Ø§ÙÙŠ

---

### 4. ØªÙƒØ§Ù…Ù„ ZATCA Ø§Ù„ÙƒØ§Ù…Ù„ (Complete ZATCA Integration) âš ï¸

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** âœ… Ù…Ø°ÙƒÙˆØ± ÙƒÙ€ API - **Ù„ÙƒÙ† ØºÙŠØ± ÙƒØ§ÙÙ**

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
Ù‡ÙŠØ¦Ø© Ø§Ù„Ø²ÙƒØ§Ø© (ZATCA) ØªØªØ·Ù„Ø¨ Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø¬Ø±Ø¯ API. ØªØªØ·Ù„Ø¨:
- Ø¹Ù…Ù„ÙŠØ© ØªÙˆÙ‚ÙŠØ¹ XML
- ØªØ´ÙÙŠØ±
- Ø±Ø¨Ø· Ù…Ø¹ Ù…Ù†ØµØ© "ÙØ§ØªÙˆØ±Ø©"
- ØªÙˆÙ„ÙŠØ¯ QR Code Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙŠØ± ZATCA

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

#### Ø£. Ù…ÙƒØªØ¨Ø© Ù„ØªÙˆÙ„ÙŠØ¯ QR Code Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ ZATCA

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØªÙˆÙ„ÙŠØ¯ QR Code Ø¨ØªÙ†Ø³ÙŠÙ‚ TLV Base64
- Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙŠØ± ZATCA Phase 2
- ØªØ¶Ù…ÙŠÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø´ÙØ±Ø©

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# sales/zatca.py
from cryptography.hazmat.primitives import hashes, serialization
from cryptography.hazmat.primitives.asymmetric import padding
import base64
import qrcode

class ZATCAIntegration:
    def __init__(self, private_key_path, certificate_path):
        # ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø®Ø§ØµØ©
        with open(private_key_path, 'rb') as f:
            self.private_key = serialization.load_pem_private_key(
                f.read(),
                password=None,
            )
    
    def generate_invoice_hash(self, invoice_data: dict) -> str:
        """ØªÙˆÙ„ÙŠØ¯ Hash Ù„Ù„ÙØ§ØªÙˆØ±Ø©"""
        # ØªØ·Ø¨ÙŠÙ‚ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ZATCA
        # ...
    
    def sign_invoice(self, invoice_data: dict) -> str:
        """ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„ÙØ§ØªÙˆØ±Ø©"""
        invoice_hash = self.generate_invoice_hash(invoice_data)
        
        signature = self.private_key.sign(
            invoice_hash.encode(),
            padding.PKCS1v15(),
            hashes.SHA256()
        )
        
        return base64.b64encode(signature).decode()
    
    def generate_qr_code(self, invoice_data: dict) -> str:
        """ØªÙˆÙ„ÙŠØ¯ QR Code Ø¨ØªÙ†Ø³ÙŠÙ‚ TLV"""
        # Ø¨Ù†Ø§Ø¡ TLV Structure
        tlv_data = self.build_tlv_structure(invoice_data)
        
        # ØªÙˆÙ„ÙŠØ¯ QR Code
        qr = qrcode.QRCode(version=1, box_size=10, border=5)
        qr.add_data(tlv_data)
        qr.make(fit=True)
        
        return qr
    
    def build_tlv_structure(self, invoice_data: dict) -> str:
        """Ø¨Ù†Ø§Ø¡ TLV Structure Ø­Ø³Ø¨ Ù…Ø¹Ø§ÙŠÙŠØ± ZATCA"""
        # Tag 1: Seller Name
        # Tag 2: VAT Number
        # Tag 3: Invoice Date
        # Tag 4: Invoice Total
        # Tag 5: VAT Total
        # ...
        pass
```

#### Ø¨. Ø¢Ù„ÙŠØ© ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø®Ø§ØµØ© (Private Keys)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- ØªØ®Ø²ÙŠÙ† Ø¢Ù…Ù† Ù„Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø®Ø§ØµØ© Ù„ÙƒÙ„ Ø´Ø±ÙƒØ© (Tenant)
- ØªØ´ÙÙŠØ± Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ÙÙŠ Database
- Ø§Ø³ØªØ®Ø¯Ø§Ù… Environment Variables Ø£Ùˆ Vault

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# sales/models.py
from django_cryptography.fields import encrypt

class TenantZATCAConfig(models.Model):
    """Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ZATCA Ù„ÙƒÙ„ Tenant"""
    tenant = models.OneToOneField(Client, on_delete=models.CASCADE)
    
    # Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ø´ÙØ±Ø©
    private_key_encrypted = encrypt(models.TextField())
    certificate_encrypted = encrypt(models.TextField())
    
    vat_number = models.CharField(max_length=50)
    branch_id = models.CharField(max_length=50, default='0')
    
    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
    zatca_api_url = models.URLField(default='https://zatca.gov.sa/api')
    api_key = encrypt(models.CharField(max_length=255))
    
    is_active = models.BooleanField(default=True)
```

#### Ø¬. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Validation)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ù† ZATCA API

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```python
# sales/zatca.py
class ZATCAValidator:
    def validate_invoice(self, invoice: Invoice) -> tuple[bool, list]:
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©"""
        errors = []
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        if not invoice.vat_number:
            errors.append("Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ù…Ø·Ù„ÙˆØ¨")
        
        if not invoice.items.exists():
            errors.append("Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ±")
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ù„Øº
        if invoice.total_amount <= 0:
            errors.append("Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±")
        
        return len(errors) == 0, errors
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ **Ø¹Ø§Ù„ÙŠØ©** - Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©

---

### 5. CI/CD Pipeline âŒ

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - **Ù…Ø´ÙƒÙ„Ø© Ø­Ø±Ø¬Ø© Ù„Ù„Ø¥Ù†ØªØ§Ø¬**

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**
Ø¨Ø¯ÙˆÙ† CI/CD PipelineØŒ Ø³ØªÙƒÙˆÙ† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:
- ÙƒØ§Ø¨ÙˆØ³Ø§Ù‹ ÙŠØ¯ÙˆÙŠØ§Ù‹
- Ø¹Ø±Ø¶Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©
- ØµØ¹Ø¨Ø© ÙÙŠ Rollback
- Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

#### Ø£. GitHub Actions Workflow

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**
- Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ ÙƒÙ„ Push
- Ø¨Ù†Ø§Ø¡ Docker Images
- Deploy ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- Rollback Mechanism

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Tests
        run: |
          docker-compose -f docker-compose.test.yml up --abort-on-container-exit
  
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build Docker Images
        run: |
          docker build -t aquaerp-backend:latest ./backend
          docker build -t aquaerp-frontend:latest ./frontend
  
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Server
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.PROD_HOST }}
          username: ${{ secrets.PROD_USER }}
          key: ${{ secrets.PROD_SSH_KEY }}
          script: |
            cd /opt/aquaerp
            docker-compose pull
            docker-compose up -d
            docker-compose exec web python manage.py migrate_schemas
```

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¡ **Ù…ØªÙˆØ³Ø·Ø©** - Ù…Ù‡Ù…Ø© Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø«Ù… Ø£ØªÙ…ØªØªÙ‡Ø§

---

## ğŸ“‹ ÙˆØ«ÙŠÙ‚Ø© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ (PRD) - AquaERP SaaS Module

> **Ù…Ù„Ø§Ø­Ø¸Ø©:** Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© ØªØ­Ø¯Ø¯ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ù„Ø¨Ù†Ø§Ø¡ Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù† "ØªØ·Ø¨ÙŠÙ‚ Ù…Ø²Ø±Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©" Ø¥Ù„Ù‰ "Ù…Ù†ØµØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†" Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ²ÙŠÙ‹Ø§.

**Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:** AquaERP â€“ SaaS Layer Implementation  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©:** Ù…Ø³ÙˆØ¯Ø© Ù„Ù„ØªÙ†ÙÙŠØ°  
**Ø§Ù„Ù‡Ø¯Ù:** ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ "Ù…Ø²Ø±Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©" Ø¥Ù„Ù‰ "Ù…Ù†ØµØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†" (Multi-tenant SaaS Platform) Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ²ÙŠÙ‹Ø§.

---

### 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© (Overview)

Ø§Ù„Ù†Ø¸Ø§Ù… Ø­Ø§Ù„ÙŠÙ‹Ø§ ÙŠØ¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† ØªÙ‚Ù†ÙŠÙ‹Ø§ (via django-tenants)ØŒ ÙˆÙ„ÙƒÙ†Ù‡ ÙŠÙØªÙ‚Ø± Ø¥Ù„Ù‰ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ (Business Logic) Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‡Ø¤Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†. Ø§Ù„Ù‡Ø¯Ù Ù‡Ùˆ Ø¨Ù†Ø§Ø¡ "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ" (Super Admin Portal) Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§ØªØŒ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†ØŒ Ø§Ù„ÙÙˆØ§ØªÙŠØ±ØŒ ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©.

**Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:**
- âœ… Multi-tenancy ØªÙ‚Ù†ÙŠ Ù…ÙˆØ¬ÙˆØ¯ (django-tenants)
- âœ… Schema-based isolation ÙŠØ¹Ù…Ù„
- âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¢Ù„ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Tenants Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© ÙˆØ§Ø­Ø¯Ø©
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø¸Ø§Ù… Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø£Ùˆ Ø¨Ø§Ù‚Ø§Øª
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø¸Ø§Ù… ÙÙˆØªØ±Ø©

**Ø§Ù„Ù‡Ø¯Ù:**
- âœ… Ø¨Ù†Ø§Ø¡ Super Admin Portal ÙƒØ§Ù…Ù„
- âœ… Ù†Ø¸Ø§Ù… Plans & Subscriptions
- âœ… ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
- âœ… Feature Gating & Quotas
- âœ… Onboarding Flow ØªÙ„Ù‚Ø§Ø¦ÙŠ

---

### 2. Ù‡ÙŠÙƒÙ„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database Schema Concept)

ÙŠØ¬Ø¨ ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙÙŠ Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ø¹Ø§Ù… (Public Schema) ÙÙ‚Ø·ØŒ Ø¨Ø­ÙŠØ« ØªÙƒÙˆÙ† Ù…Ø´ØªØ±ÙƒØ© Ø¨ÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆÙ„Ø§ ØªØªØ¨Ø¹ Ù„Ù…Ø³ØªØ£Ø¬Ø± Ù…Ø­Ø¯Ø¯.

#### Ø£. Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (New Entities)

##### Plan (Ø§Ù„Ø¨Ø§Ù‚Ø©)

```python
class Plan(models.Model):
    """Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"""
    name = models.CharField(max_length=100)  # Basic, Pro, Enterprise
    name_ar = models.CharField(max_length=100)  # Ø£Ø³Ø§Ø³ÙŠØŒ Ø§Ø­ØªØ±Ø§ÙÙŠØŒ Ù…Ø¤Ø³Ø³ÙŠ
    description = models.TextField(blank=True)
    description_ar = models.TextField(blank=True)
    
    # Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
    price_monthly = models.DecimalField(max_digits=10, decimal_places=2)
    price_yearly = models.DecimalField(max_digits=10, decimal_places=2)
    
    # Ø§Ù„Ù…ÙŠØ²Ø§Øª (Toggle switches)
    features = models.JSONField(default=dict, help_text="Ù…Ø«Ø§Ù„: {'reports': True, 'accounting': True, 'zatca': False}")
    
    # Ø§Ù„Ù‚ÙŠÙˆØ¯ (Quotas)
    quotas = models.JSONField(default=dict, help_text="Ù…Ø«Ø§Ù„: {'max_ponds': 10, 'max_users': 5, 'max_storage_gb': 50}")
    
    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    trial_days = models.IntegerField(default=14, help_text="Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©")
    is_active = models.BooleanField(default=True)
    is_featured = models.BooleanField(default=False, help_text="Ø¹Ø±Ø¶ ÙƒØ¨Ø§Ù‚Ø© Ù…Ù…ÙŠØ²Ø©")
    
    sort_order = models.IntegerField(default=0)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['sort_order', 'price_monthly']
        verbose_name = 'Ø¨Ø§Ù‚Ø©'
        verbose_name_plural = 'Ø§Ù„Ø¨Ø§Ù‚Ø§Øª'
```

##### Subscription (Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ)

```python
class Subscription(models.Model):
    """Ø§Ø´ØªØ±Ø§Ùƒ Tenant ÙÙŠ Ø¨Ø§Ù‚Ø©"""
    tenant = models.OneToOneField(Client, on_delete=models.CASCADE, related_name='subscription')
    plan = models.ForeignKey(Plan, on_delete=models.PROTECT, related_name='subscriptions')
    
    STATUS_CHOICES = [
        ('trial', 'ØªØ¬Ø±ÙŠØ¨ÙŠ'),
        ('active', 'Ù†Ø´Ø·'),
        ('past_due', 'Ù…ØªØ£Ø®Ø±'),
        ('cancelled', 'Ù…Ù„ØºÙŠ'),
        ('suspended', 'Ù…Ø¹Ù„Ù‚'),
    ]
    
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='trial')
    
    # Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
    trial_ends_at = models.DateTimeField(null=True, blank=True)
    current_period_start = models.DateTimeField()
    current_period_end = models.DateTimeField()
    cancelled_at = models.DateTimeField(null=True, blank=True)
    
    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ¬Ø¯ÙŠØ¯
    auto_renew = models.BooleanField(default=True)
    billing_cycle = models.CharField(max_length=10, choices=[('monthly', 'Ø´Ù‡Ø±ÙŠ'), ('yearly', 'Ø³Ù†ÙˆÙŠ')], default='monthly')
    
    # Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹
    payment_method = models.CharField(max_length=50, default='stripe', choices=[
        ('stripe', 'Stripe'),
        ('moyasar', 'Moyasar'),
        ('paytabs', 'PayTabs'),
    ])
    stripe_subscription_id = models.CharField(max_length=255, blank=True)
    stripe_customer_id = models.CharField(max_length=255, blank=True)
    
    # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    total_paid = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    last_payment_date = models.DateTimeField(null=True, blank=True)
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        verbose_name = 'Ø§Ø´ØªØ±Ø§Ùƒ'
        verbose_name_plural = 'Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª'
```

##### Invoice (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ - Platform Invoices)

```python
class PlatformInvoice(models.Model):
    """ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ - ØªØ®ØªÙ„Ù Ø¹Ù† ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ ERP"""
    subscription = models.ForeignKey(Subscription, on_delete=models.CASCADE, related_name='invoices')
    
    invoice_number = models.CharField(max_length=50, unique=True)
    invoice_date = models.DateField(auto_now_add=True)
    due_date = models.DateField()
    
    STATUS_CHOICES = [
        ('draft', 'Ù…Ø³ÙˆØ¯Ø©'),
        ('issued', 'Ù…ØµØ¯Ø±Ø©'),
        ('paid', 'Ù…Ø¯ÙÙˆØ¹Ø©'),
        ('overdue', 'Ù…ØªØ£Ø®Ø±Ø©'),
        ('cancelled', 'Ù…Ù„ØºØ§Ø©'),
    ]
    
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')
    
    # Ø§Ù„Ù…Ø¨Ø§Ù„Øº
    subtotal = models.DecimalField(max_digits=10, decimal_places=2)
    vat_amount = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    total_amount = models.DecimalField(max_digits=10, decimal_places=2)
    
    # Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹
    payment_method = models.CharField(max_length=50, blank=True)
    payment_date = models.DateTimeField(null=True, blank=True)
    payment_reference = models.CharField(max_length=255, blank=True)
    
    # PDF
    pdf_file = models.FileField(upload_to='invoices/', blank=True, null=True)
    
    notes = models.TextField(blank=True)
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        ordering = ['-invoice_date']
        verbose_name = 'ÙØ§ØªÙˆØ±Ø© Ø§Ø´ØªØ±Ø§Ùƒ'
        verbose_name_plural = 'ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª'
```

---

### 3. Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ© (Functional Requirements)

#### Ø£ÙˆÙ„Ø§Ù‹: Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ (Super Admin Dashboard)

Ù‡Ø°Ù‡ Ø§Ù„Ù„ÙˆØ­Ø© Ø®Ø§ØµØ© Ø¨Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ù†ØµØ© ÙÙ‚Ø· ÙˆÙ„Ø§ ÙŠØ±Ø§Ù‡Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù†ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Tenant.

##### Ø£. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Tenants Management)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**

1. **Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©:**
   - Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø¨Ø¬Ù…ÙŠØ¹ Tenants
   - Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© (Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ø§Ù„Ø¨Ø§Ù‚Ø©)
   - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù†Ø·Ø§Ù‚ØŒ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŒ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ)
   - Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© (Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­ÙˆØ§Ø¶ØŒ Ø¢Ø®Ø± Ù†Ø´Ø§Ø·)

2. **Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ£Ø¬Ø± Ø¬Ø¯ÙŠØ¯ (Provisioning) Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©:**
   - Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Tenant Ø¬Ø¯ÙŠØ¯
   - Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ÙØ±Ø¹ÙŠ (Subdomain)
   - Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù†Ø·Ø§Ù‚
   - Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
   - Ø¥Ù†Ø´Ø§Ø¡ Schema ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
   - Ø¥Ù†Ø´Ø§Ø¡ Admin User ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
   - Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªØ±Ø­ÙŠØ¨ÙŠ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„

3. **Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ¬Ù…ÙŠØ¯ (Suspend) Ø­Ø³Ø§Ø¨ Ù…Ø²Ø±Ø¹Ø©:**
   - Ø²Ø± "ØªØ¬Ù…ÙŠØ¯" ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙˆØ±Ø§Ù‹
   - ØªØ­ÙˆÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¥Ù„Ù‰ "suspended"
   - Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ø¹Ù…ÙŠÙ„
   - Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¬Ù…ÙŠØ¯

4. **Ù…ÙŠØ²Ø© "Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ€..." (Impersonate):**
   - Ø²Ø± ÙŠØ³Ù…Ø­ Ù„Ù„Ù€ Super Admin Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø£ÙŠ Ø¹Ù…ÙŠÙ„
   - ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø¯ÙˆÙ† Ù…Ø¹Ø±ÙØ© ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±Ù‡Ù…
   - ØªØ³Ø¬ÙŠÙ„ Ø¬Ù„Ø³Ø© Impersonation ÙÙŠ Audit Log
   - Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø¬Ù„Ø³Ø© Impersonation ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Super Admin

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# api/saas/tenants.py
from ninja import Router
from django_tenants.utils import schema_context

router = Router()

@router.post('/tenants/', auth=SuperAdminAuth())
def create_tenant(request, data: TenantCreateSchema):
    """Ø¥Ù†Ø´Ø§Ø¡ Tenant Ø¬Ø¯ÙŠØ¯"""
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù†Ø·Ø§Ù‚
    if Domain.objects.filter(domain=data.subdomain).exists():
        return 400, ErrorResponse(detail="Ø§Ù„Ù†Ø·Ø§Ù‚ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Tenant
    tenant = Client.objects.create(
        name=data.farm_name,
        schema_name=data.subdomain,
        paid_until=data.trial_ends_at,
        on_trial=True,
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Domain
    Domain.objects.create(
        domain=data.subdomain,
        tenant=tenant,
        is_primary=True,
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Schema (ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¹Ø¨Ø± Celery)
    create_tenant_schema.delay(tenant.id)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Admin User
    admin_user = User.objects.create_user(
        username=data.admin_username,
        email=data.admin_email,
        password=data.admin_password,
        role=Role.objects.get(name='admin'),
        tenant=tenant,
    )
    
    # Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªØ±Ø­ÙŠØ¨ÙŠ
    send_welcome_email.delay(tenant.id, admin_user.id)
    
    return 201, TenantSchema.from_orm(tenant)

@router.post('/tenants/{tenant_id}/impersonate', auth=SuperAdminAuth())
def impersonate_tenant(request, tenant_id: int):
    """Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ€ Tenant"""
    tenant = Client.objects.get(id=tenant_id)
    
    # ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Audit Log
    log_action(
        action_type='impersonate',
        entity_type='tenant',
        entity_id=tenant.id,
        user=request.user,
        description=f"Super Admin {request.user.username} Ø¯Ø®Ù„ ÙƒÙ€ {tenant.name}",
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ JWT Token Ù„Ù„Ù€ Tenant Admin
    admin_user = tenant.users.filter(role__name='admin').first()
    refresh = RefreshToken.for_user(admin_user)
    
    return {
        'access_token': str(refresh.access_token),
        'refresh_token': str(refresh),
        'tenant_id': tenant.id,
        'redirect_url': f'https://{tenant.domains.first().domain}/dashboard',
    }
```

##### Ø¨. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø·Ø· (Plans Management)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**

1. **ÙˆØ§Ø¬Ù‡Ø© CRUD (Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù) Ù„Ù„Ø¨Ø§Ù‚Ø§Øª:**
   - Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ù‚Ø©
   - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± (Ø´Ù‡Ø±ÙŠ/Ø³Ù†ÙˆÙŠ)
   - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙŠØ²Ø§Øª (Toggle switches)
   - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù‚ÙŠÙˆØ¯ (Quotas)

2. **Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù‚ÙŠÙˆØ¯:**
   - Ù…Ø«Ø§Ù„: Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© = 5 Ø£Ø­ÙˆØ§Ø¶ ÙÙ‚Ø·
   - Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© = Ù„Ø§ Ù…Ø­Ø¯ÙˆØ¯ (null)
   - ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ù…ÙˆØ­
   - ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø­Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# api/saas/plans.py
@router.get('/plans/', response=List[PlanSchema], auth=SuperAdminAuth())
def list_plans(request):
    """Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"""
    return Plan.objects.filter(is_active=True)

@router.post('/plans/', response={201: PlanSchema}, auth=SuperAdminAuth())
def create_plan(request, data: PlanCreateSchema):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©"""
    plan = Plan.objects.create(**data.dict())
    return 201, PlanSchema.from_orm(plan)

@router.put('/plans/{plan_id}', response=PlanSchema, auth=SuperAdminAuth())
def update_plan(request, plan_id: int, data: PlanUpdateSchema):
    """ØªØ­Ø¯ÙŠØ« Ø¨Ø§Ù‚Ø©"""
    plan = Plan.objects.get(id=plan_id)
    for key, value in data.dict(exclude_unset=True).items():
        setattr(plan, key, value)
    plan.save()
    return PlanSchema.from_orm(plan)
```

##### Ø¬. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ù…Ø§Ù„ÙŠØ© (Financial Overview)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**

1. **Ø¹Ø±Ø¶ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ù…ØªÙƒØ±Ø±Ø© (MRR):**
   - Ø­Ø³Ø§Ø¨ MRR Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©
   - Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
   - Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚

2. **Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„ØªÙŠ Ø³ØªÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹:**
   - Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„ØªÙŠ Ø³ØªÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…
   - Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# api/saas/dashboard.py
@router.get('/dashboard/stats', auth=SuperAdminAuth())
def get_dashboard_stats(request):
    """Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Super Admin Dashboard"""
    active_subscriptions = Subscription.objects.filter(status='active')
    
    # Ø­Ø³Ø§Ø¨ MRR
    mrr = sum(
        sub.plan.price_monthly if sub.billing_cycle == 'monthly' 
        else sub.plan.price_yearly / 12
        for sub in active_subscriptions
    )
    
    # Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„ØªÙŠ Ø³ØªÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹
    from datetime import datetime, timedelta
    soon_expiring = Subscription.objects.filter(
        current_period_end__lte=datetime.now() + timedelta(days=7),
        status='active'
    )
    
    return {
        'total_tenants': Client.objects.count(),
        'active_subscriptions': active_subscriptions.count(),
        'mrr': float(mrr),
        'soon_expiring_count': soon_expiring.count(),
        'revenue_this_month': calculate_monthly_revenue(),
    }
```

---

#### Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Onboarding Flow)

##### ØµÙØ­Ø© Ù‡Ø¨ÙˆØ· Ù„Ù„ØªØ³Ø¬ÙŠÙ„ (Sign-up Page)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**

1. **Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©:**
   - Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
   - Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ÙØ±Ø¹ÙŠ (Subdomain selection: farm1.aquaerp.com)
   - Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù†Ø·Ø§Ù‚ (AJAX check)

2. **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù†Ø·Ø§Ù‚:**
   - API endpoint Ù„Ù„ØªØ­Ù‚Ù‚
   - Ø±Ø³Ø§Ù„Ø© ÙÙˆØ±ÙŠØ© (Ù…ØªØ§Ø­/ØºÙŠØ± Ù…ØªØ§Ø­)

3. **Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø©:**
   - Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
   - Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª
   - Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø©

4. **Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ Tenant ÙˆØ§Ù„Ù€ Schema:**
   - ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹
   - Ø£Ùˆ ØªÙØ¹ÙŠÙ„ ÙØªØ±Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© (14-30 ÙŠÙˆÙ…)
   - Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªØ±Ø­ÙŠØ¨ÙŠ

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# api/signup.py
@router.post('/check-subdomain')
def check_subdomain(request, subdomain: str):
    """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ù†Ø·Ø§Ù‚"""
    if Domain.objects.filter(domain=subdomain).exists():
        return {'available': False, 'message': 'Ø§Ù„Ù†Ø·Ø§Ù‚ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„'}
    return {'available': True, 'message': 'Ø§Ù„Ù†Ø·Ø§Ù‚ Ù…ØªØ§Ø­'}

@router.post('/signup', response={201: SignupResponseSchema})
def signup(request, data: SignupSchema):
    """ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯"""
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚
    if not check_subdomain(request, data.subdomain)['available']:
        return 400, ErrorResponse(detail="Ø§Ù„Ù†Ø·Ø§Ù‚ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„")
    
    # Ø¥Ù†Ø´Ø§Ø¡ Tenant
    tenant = Client.objects.create(
        name=data.farm_name,
        schema_name=data.subdomain,
        email=data.email,
        on_trial=True,
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Domain
    Domain.objects.create(
        domain=data.subdomain,
        tenant=tenant,
        is_primary=True,
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Schema (ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©)
    create_tenant_schema.delay(tenant.id)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Subscription
    plan = Plan.objects.get(id=data.plan_id)
    subscription = Subscription.objects.create(
        tenant=tenant,
        plan=plan,
        status='trial',
        trial_ends_at=timezone.now() + timedelta(days=plan.trial_days),
        current_period_start=timezone.now(),
        current_period_end=timezone.now() + timedelta(days=plan.trial_days),
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Admin User
    admin_user = User.objects.create_user(
        username=data.username,
        email=data.email,
        password=data.password,
        full_name=data.farm_name,
        role=Role.objects.get(name='admin'),
        tenant=tenant,
    )
    
    # Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªØ±Ø­ÙŠØ¨ÙŠ
    send_welcome_email.delay(tenant.id, admin_user.id)
    
    return 201, {
        'tenant_id': tenant.id,
        'subdomain': data.subdomain,
        'message': 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.',
    }
```

---

#### Ø«Ø§Ù„Ø«Ø§Ù‹: Ø¥Ù†ÙØ§Ø° Ø§Ù„Ù‚ÙŠÙˆØ¯ (Feature Gating & Quotas)

ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Middleware Ø£Ùˆ Service Layer ÙÙŠ Django Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù‚Ø¨Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª.

##### Backend Logic

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# tenants/aqua_core/services/quota_service.py
class QuotaService:
    @staticmethod
    def check_quota(tenant, quota_type: str, current_count: int) -> tuple[bool, str]:
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠØ¯"""
        subscription = getattr(tenant, 'subscription', None)
        if not subscription:
            return False, "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø´ØªØ±Ø§Ùƒ Ù†Ø´Ø·"
        
        plan = subscription.plan
        max_allowed = plan.quotas.get(quota_type)
        
        if max_allowed is None:  # Ù„Ø§ Ù…Ø­Ø¯ÙˆØ¯
            return True, ""
        
        if current_count >= max_allowed:
            return False, f"Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª Ø­Ø¯ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ({max_allowed}). ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ±Ù‚ÙŠØ©."
        
        return True, ""

# api/ponds.py
from tenants.aqua_core.services.quota_service import QuotaService

@router.post('/', response={201: PondSchema}, auth=TokenAuth())
def create_pond(request, data: PondCreateSchema):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø­ÙˆØ¶ Ø¬Ø¯ÙŠØ¯ - Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠØ¯"""
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠØ¯
    current_count = Pond.objects.count()
    allowed, message = QuotaService.check_quota(
        request.tenant,
        'max_ponds',
        current_count
    )
    
    if not allowed:
        return 403, ErrorResponse(detail=message)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­ÙˆØ¶
    pond = Pond.objects.create(**data.dict(), tenant=request.tenant)
    return 201, PondSchema.from_orm(pond)
```

##### Frontend Logic

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```typescript
// frontend/src/components/common/FeatureGate.tsx
import { useAuthStore } from '../store/authStore'
import { apiService } from '../services/api'

interface FeatureGateProps {
  feature: string
  children: React.ReactNode
  fallback?: React.ReactNode
}

export function FeatureGate({ feature, children, fallback }: FeatureGateProps) {
  const { subscription } = useAuthStore()
  
  const hasFeature = subscription?.plan?.features?.[feature] === true
  
  if (!hasFeature) {
    return fallback || (
      <div className="p-4 bg-yellow-50 border border-yellow-200 rounded">
        <p className="text-yellow-800">
          Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© ÙÙŠ Ø¨Ø§Ù‚Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©.
        </p>
        <button onClick={() => window.location.href = '/billing/upgrade'}>
          ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¢Ù†
        </button>
      </div>
    )
  }
  
  return <>{children}</>
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡
<FeatureGate feature="reports">
  <Reports />
</FeatureGate>
```

---

### 4. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (Payment Gateway Integration)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨:** Ø±Ø¨Ø· Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø© Ø¯ÙØ¹ (Ù…Ø«Ù„ Moyasar Ø£Ùˆ Stripe).

**Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ:**

1. **Ø¹Ù†Ø¯ Ø­Ù„ÙˆÙ„ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯:**
   - ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø®ØµÙ… Ø§Ù„Ù…Ø¨Ù„Øº ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
   - ÙÙŠ Ø­Ø§Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
   - Ø¥Ø±Ø³Ø§Ù„ ÙØ§ØªÙˆØ±Ø© PDF Ù„Ù„Ø¹Ù…ÙŠÙ„

2. **ÙÙŠ Ø­Ø§Ù„ Ø§Ù„ÙØ´Ù„ (Webhook: Payment Failed):**
   - ØªØ­ÙˆÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¥Ù„Ù‰ "Past Due"
   - Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ø¹Ù…ÙŠÙ„
   - Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

3. **Ø¨Ø¹Ø¯ X Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„ÙØ´Ù„:**
   - ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ "Suspended"
   - Ù…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ (Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·)
   - Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ù†Ù‡Ø§Ø¦ÙŠ

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```python
# api/billing/webhooks.py
@router.post('/webhooks/stripe')
def stripe_webhook(request):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Webhooks Ù…Ù† Stripe"""
    payload = request.body
    sig_header = request.META.get('HTTP_STRIPE_SIGNATURE')
    
    try:
        event = stripe.Webhook.construct_event(
            payload, sig_header, settings.STRIPE_WEBHOOK_SECRET
        )
    except ValueError:
        return 400, {'error': 'Invalid payload'}
    except stripe.error.SignatureVerificationError:
        return 400, {'error': 'Invalid signature'}
    
    # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    if event['type'] == 'invoice.payment_succeeded':
        handle_payment_succeeded(event['data']['object'])
    elif event['type'] == 'invoice.payment_failed':
        handle_payment_failed(event['data']['object'])
    elif event['type'] == 'customer.subscription.deleted':
        handle_subscription_cancelled(event['data']['object'])
    
    return 200, {'status': 'success'}

def handle_payment_failed(invoice):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹"""
    subscription = Subscription.objects.get(
        stripe_subscription_id=invoice['subscription']
    )
    
    subscription.status = 'past_due'
    subscription.save()
    
    # Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ ØªÙ†Ø¨ÙŠÙ‡
    send_payment_failed_email.delay(subscription.tenant.id)
    
    # Ø¨Ø¹Ø¯ 7 Ø£ÙŠØ§Ù…ØŒ ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Suspended
    suspend_subscription_after_days.delay(subscription.id, days=7)
```

---

### 5. Ù…ØªØ·Ù„Ø¨Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Frontend Requirements)

ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ù€ Sidebar Ø¨Ø§Ø³Ù… "Billing & Subscription" ÙŠØ¸Ù‡Ø± Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (Tenant Admin) ÙÙ‚Ø·.

**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª:**

1. **ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©:**
   - Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø£Ù†Øª Ø¹Ù„Ù‰ Ø¨Ø§Ù‚Ø© "Pro")
   - Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
   - ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ù‚Ø§Ø¯Ù…

2. **Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ:**
   - Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù…: Ø§Ø³ØªØ®Ø¯Ù…Øª 3 Ù…Ù† Ø£ØµÙ„ 5 Ø£Ø­ÙˆØ§Ø¶
   - Ø§Ø³ØªØ®Ø¯Ù…Øª 2 Ù…Ù† Ø£ØµÙ„ 10 Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
   - Ù…Ø³Ø§Ø­Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

3. **Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª:**
   - Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØªÙŠØ±
   - ØªØ­Ù…ÙŠÙ„ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨ØµÙŠØºØ© PDF
   - Ø­Ø§Ù„Ø© ÙƒÙ„ ÙØ§ØªÙˆØ±Ø© (Ù…Ø¯ÙÙˆØ¹Ø©/Ù…ØªØ£Ø®Ø±Ø©)

4. **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª:**
   - Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù Ø¨Ø·Ø§Ù‚Ø© Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©
   - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
   - ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹

**Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ØªÙ‚Ù†ÙŠ:**

```typescript
// frontend/src/pages/Billing.tsx
export default function Billing() {
  const { subscription } = useAuthStore()
  const [invoices, setInvoices] = useState([])
  const [usage, setUsage] = useState(null)
  
  useEffect(() => {
    fetchInvoices()
    fetchUsage()
  }, [])
  
  const fetchUsage = async () => {
    const data = await apiService.getUsageStats()
    setUsage(data)
  }
  
  return (
    <Layout>
      <div className="space-y-6">
        {/* ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© */}
        <Card title="Ø¨Ø§Ù‚Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©">
          <div className="space-y-4">
            <div>
              <span className="text-gray-600">Ø§Ù„Ø¨Ø§Ù‚Ø©:</span>
              <span className="font-bold">{subscription.plan.name_ar}</span>
            </div>
            <div>
              <span className="text-gray-600">Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</span>
              <span>{daysRemaining} ÙŠÙˆÙ…</span>
            </div>
          </div>
        </Card>
        
        {/* Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ */}
        <Card title="Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ">
          <div className="space-y-4">
            <div>
              <div className="flex justify-between mb-2">
                <span>Ø§Ù„Ø£Ø­ÙˆØ§Ø¶</span>
                <span>{usage.ponds_used} / {subscription.plan.quotas.max_ponds}</span>
              </div>
              <ProgressBar 
                value={usage.ponds_used} 
                max={subscription.plan.quotas.max_ponds} 
              />
            </div>
            {/* ... Ø§Ù„Ù…Ø²ÙŠØ¯ */}
          </div>
        </Card>
        
        {/* Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª */}
        <Card title="Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª">
          <InvoicesList invoices={invoices} />
        </Card>
      </div>
    </Layout>
  )
}
```

---

### 6. Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ø§Ù† (Technical Constraints)

#### Ø£. Ø§Ù„Ø¹Ø²Ù„ Ø§Ù„ØªØ§Ù… (Data Isolation)

**Ø§Ù„Ù…ØªØ·Ù„Ø¨:** Ø§Ù„ØªØ£ÙƒØ¯ Ø¨Ù†Ø³Ø¨Ø© 100% Ø£Ù† Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ Super Admin Ù…Ø¹Ø²ÙˆÙ„ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡ Ø¹Ø¨Ø± Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.

**Ø§Ù„Ø­Ù„:**

```python
# tenants/aqua_core/middleware.py
class SuperAdminIsolationMiddleware:
    """Ù…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Super Admin APIs Ù…Ù† Ù†Ø·Ø§Ù‚Ø§Øª Tenants"""
    def __call__(self, request):
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Super Admin APIs Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ù…Ù† Tenant domains
        if request.path.startswith('/api/saas/'):
            # ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙ‚Ø·
            if not request.get_host().startswith('admin.') and not request.get_host().startswith('localhost'):
                return JsonResponse(
                    {'error': 'ØºÙŠØ± Ù…ØµØ±Ø­'},
                    status=403
                )
        
        return self.get_response(request)
```

#### Ø¨. CORS Settings

**Ø§Ù„Ù…ØªØ·Ù„Ø¨:** Ø¶Ø¨Ø· Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù€ Cross-Origin Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¹Ù…Ù„ Ø§Ù„Ù€ Dashboard Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© Ù…Ø¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.

**Ø§Ù„Ø­Ù„:**

```python
# settings.py
CORS_ALLOWED_ORIGINS = [
    "https://admin.aquaerp.com",  # Super Admin Dashboard
    "https://*.aquaerp.com",  # Tenant Domains
]

CORS_ALLOW_CREDENTIALS = True
```

#### Ø¬. Scalability

**Ø§Ù„Ù…ØªØ·Ù„Ø¨:** Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø¹Ù…Ù„ÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ Tenant Ø¬Ø¯ÙŠØ¯ (Migrations) ØªØªÙ… ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© (Background Task via Celery) ÙˆÙ„Ø§ ØªØ¬Ù…Ø¯ Ø§Ù„Ù…ØªØµÙØ­.

**Ø§Ù„Ø­Ù„:**

```python
# tenants/tasks.py
from celery import shared_task

@shared_task
def create_tenant_schema(tenant_id: int):
    """Ø¥Ù†Ø´Ø§Ø¡ Schema Ù„Ù„Ù€ Tenant ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©"""
    tenant = Client.objects.get(id=tenant_id)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Schema
    with schema_context('public'):
        connection.set_tenant(tenant)
        call_command('migrate_schemas', '--schema', tenant.schema_name)
    
    # Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
    send_tenant_ready_email.delay(tenant_id)
```

---

### ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ù„Ù…Ø·ÙˆØ± (Developer Notes)

1. **Ø§Ø³ØªØ®Ø¯Ø§Ù… django-tenants Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯:**
   - ØªØ£ÙƒØ¯ Ù…Ù† ÙØµÙ„ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ SaaS (Ù…Ø«Ù„ `billing`, `customers`) ÙÙŠ Ø§Ù„Ù€ `SHARED_APPS`
   - ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù€ ERP (Ù…Ø«Ù„ `ponds`, `inventory`) ÙÙŠ Ø§Ù„Ù€ `TENANT_APPS`

2. **Frontend Layout Ù…Ù†ÙØµÙ„:**
   - Ø¹Ù…Ù„ Layout Ù…Ù†ÙØµÙ„ Ù„Ù„Ù€ Super Admin ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø§Ù„Ù€ Tenant Dashboard
   - ØªØ¬Ù†Ø¨ Ø§Ù„Ø®Ù„Ø· Ø¨ÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡ØªÙŠÙ†
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… Route Guards Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

3. **Security Best Practices:**
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… Environment Variables Ù„Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø­Ø³Ø§Ø³Ø©
   - ØªØ´ÙÙŠØ± Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø®Ø§ØµØ© ÙÙŠ Database
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… HTTPS ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
   - ØªÙØ¹ÙŠÙ„ Rate Limiting Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ APIs

4. **Testing:**
   - ÙƒØªØ§Ø¨Ø© Unit Tests Ù„Ø¬Ù…ÙŠØ¹ Services
   - Integration Tests Ù„Ù€ Subscription Flow
   - E2E Tests Ù„Ù€ Onboarding Process

---

## ğŸš¨ Ø§Ù„ÙØ¬ÙˆØ§Øª ÙˆØ§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©

### 1. ØµÙØ­Ø© Farm (Ø§Ù„Ù…Ø²Ø±Ø¹Ø©) âŒ

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

```tsx
// ØµÙØ­Ø© ÙØ§Ø±ØºØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹
<p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±. Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ù‡Ù†Ø§.</p>
```

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØŒ Ø¥Ù„Ø®)
- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (Ø§Ù„ÙˆØ­Ø¯Ø©ØŒ Ø§Ù„Ø¹Ù…Ù„Ø©ØŒ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©)
- Ø±Ø¨Ø· Ù…Ø¹ Tenant Model
- API Endpoint Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
- ÙˆØ§Ø¬Ù‡Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ Ø¹Ø§Ù„ÙŠØ©

### 2. ØµÙØ­Ø© Settings (Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª) âš ï¸

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

- Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· (Read-only)
- Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ Ø´ÙŠØ¡
- Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- **Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨:**
  - ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
  - ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©
  - ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  - Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
  
- **Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:**
  - Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…ÙØ¶Ù„Ø©
  - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
  - Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  - Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
  
- **Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© (Ù„Ù„Ù…Ø¯ÙŠØ±):**
  - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©
  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ZATCA
  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©

### 3. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ (Error Handling) âŒ

**Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ù…ÙˆØ­Ø¯Ø© ÙÙŠ Frontend
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Error Boundary ÙÙŠ React
- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ØºÙŠØ± ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒÙŠØ© (Network Errors)
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Retry Mechanism

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- Error Boundary Component
- Toast Notifications Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø§Ù„Ø§Øª Timeout
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø§Ù„Ø§Øª Network Failure
- Retry Mechanism Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©
- Logging Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Backend

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸ”´ Ø¹Ø§Ù„ÙŠØ©

### 4. Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª (Optimizations) âŒ

**Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Caching ÙÙŠ Frontend
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Lazy Loading Ù„Ù„ØµÙØ­Ø§Øª
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Code Splitting
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Image Optimization
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ API Response Caching

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- React.lazy() Ù„Ù„ØµÙØ­Ø§Øª
- React Query Ø£Ùˆ SWR Ù„Ù„Ù€ Caching
- Memoization Ù„Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©
- Image Lazy Loading
- API Response Caching ÙÙŠ Backend
- Database Query Optimization

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©

### 5. Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª (Testing) âŒ

**Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Unit Tests
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Integration Tests
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ E2E Tests
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Test Coverage

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- Unit Tests Ù„Ù„Ù€ Backend (pytest)
- Unit Tests Ù„Ù„Ù€ Frontend (Jest + React Testing Library)
- Integration Tests Ù„Ù„Ù€ API
- E2E Tests (Cypress Ø£Ùˆ Playwright)
- Test Coverage Reports

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø©

### 6. Ø§Ù„ØªÙˆØ«ÙŠÙ‚ (Documentation) âš ï¸

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

- README Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† ÙŠØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ«
- Swagger Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† ØºÙŠØ± Ù…ÙƒØªÙ…Ù„
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ API Documentation Ù…ÙØµÙ„Ø©
- Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ User Guide

**Ù…Ø§ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

- API Documentation ÙƒØ§Ù…Ù„Ø©
- User Guide
- Developer Guide
- Deployment Guide
- Architecture Documentation

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:** ğŸŸ¢ Ù…Ù†Ø®ÙØ¶Ø©

---

## âš¡ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ÙƒÙØ§Ø¡Ø©

### 1. Frontend Performance

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Code Splitting
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Lazy Loading Ù„Ù„ØµÙˆØ±
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Memoization
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Virtual Scrolling Ù„Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø·ÙˆÙŠÙ„Ø©
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Debouncing Ù„Ù„Ø¨Ø­Ø«

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```typescript
// 1. Code Splitting
const Dashboard = React.lazy(() => import('./pages/Dashboard'))
const Accounting = React.lazy(() => import('./pages/Accounting'))

// 2. Memoization
const ExpensiveComponent = React.memo(({ data }) => {
  // Component logic
})

// 3. Debouncing
const debouncedSearch = useMemo(
  () => debounce((query) => {
    // Search logic
  }, 300),
  []
)
```

### 2. Backend Performance

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Database Query Optimization
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Caching Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Pagination ÙÙŠ Ø¨Ø¹Ø¶ APIs
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Database Indexing Strategy

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```python
# 1. Query Optimization
from django.db.models import Prefetch, select_related

batches = Batch.objects.select_related('pond', 'species').prefetch_related('feeding_logs')

# 2. Caching
from django.core.cache import cache

def get_dashboard_stats():
    cache_key = f'dashboard_stats_{request.tenant.schema_name}'
    stats = cache.get(cache_key)
    if not stats:
        stats = calculate_stats()
        cache.set(cache_key, stats, 300)  # 5 minutes
    return stats

# 3. Pagination
from ninja.pagination import paginate, PageNumberPagination

@router.get('/batches/', response=List[BatchSchema])
@paginate(PageNumberPagination)
def list_batches(request):
    return Batch.objects.all()
```

### 3. Database Performance

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Indexes Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø«
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Connection Pooling
- âŒ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Query Analysis

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```python
# 1. Add Indexes
class Batch(models.Model):
    batch_number = models.CharField(max_length=50, db_index=True)
    created_at = models.DateTimeField(auto_now_add=True, db_index=True)
    
    class Meta:
        indexes = [
            models.Index(fields=['pond', 'status']),
            models.Index(fields=['species', 'created_at']),
        ]

# 2. Use select_related and prefetch_related
batches = Batch.objects.select_related('pond').prefetch_related('feeding_logs')
```

---

## ğŸ”’ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ù…Ø§Ù†

### 1. Security Headers

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âš ï¸ Ø¨Ø¹Ø¶ Security Headers ØºÙŠØ± Ù…ÙØ¹Ù„Ø© ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Content Security Policy (CSP)
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ X-Frame-Options ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„ØµÙØ­Ø§Øª

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```python
# settings.py
if not DEBUG:
    SECURE_SSL_REDIRECT = True
    SESSION_COOKIE_SECURE = True
    CSRF_COOKIE_SECURE = True
    SECURE_HSTS_SECONDS = 31536000
    SECURE_HSTS_INCLUDE_SUBDOMAINS = True
    SECURE_HSTS_PRELOAD = True
    SECURE_CONTENT_TYPE_NOSNIFF = True
    X_FRAME_OPTIONS = 'DENY'
    SECURE_BROWSER_XSS_FILTER = True
```

### 2. Input Validation

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âš ï¸ Ø¨Ø¹Ø¶ APIs Ù„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Validation ÙƒØ§ÙÙŠØ©
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Rate Limiting
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ SQL Injection Protection (Ø±ØºÙ… Ø£Ù† Django ÙŠØ­Ù…ÙŠ Ù…Ù† Ø°Ù„Ùƒ)

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```python
# 1. Use Pydantic for Validation
from pydantic import BaseModel, validator

class BatchCreateSchema(BaseModel):
    batch_number: str
    pond_id: int
    species_id: int
    
    @validator('batch_number')
    def validate_batch_number(cls, v):
        if len(v) < 3:
            raise ValueError('Batch number must be at least 3 characters')
        return v

# 2. Rate Limiting
from django.core.cache import cache
from django.http import HttpResponse

def rate_limit(request, key, limit=10, period=60):
    cache_key = f'rate_limit_{key}_{request.user.id}'
    count = cache.get(cache_key, 0)
    if count >= limit:
        return HttpResponse('Rate limit exceeded', status=429)
    cache.set(cache_key, count + 1, period)
    return None
```

### 3. Authentication & Authorization

#### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Token Refresh Mechanism ÙÙŠ Frontend
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Session Timeout
- âš ï¸ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ 2FA (Two-Factor Authentication)

#### Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

```typescript
// Frontend: Token Refresh
api.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401) {
      try {
        const refreshToken = authUtils.getRefreshToken()
        const { access } = await apiService.refreshToken(refreshToken)
        authUtils.setToken(access)
        // Retry original request
        return api.request(error.config)
      } catch (refreshError) {
        authUtils.clear()
        window.location.href = '/login'
      }
    }
    return Promise.reject(error)
  }
)
```

---

## ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª

### 1. Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ© (High Priority) ğŸ”´

#### Ø£. Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Farm

- Ø¥Ù†Ø´Ø§Ø¡ API Endpoint Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
- Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù…ÙˆØ°Ø¬ Frontend ÙƒØ§Ù…Ù„
- Ø±Ø¨Ø· Ù…Ø¹ Tenant Model

#### Ø¨. ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

- Ø¥Ø¶Ø§ÙØ© Error Boundary
- ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£
- Ø¥Ø¶Ø§ÙØ© Retry Mechanism

#### Ø¬. ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡

- Ø¥Ø¶Ø§ÙØ© Code Splitting
- Ø¥Ø¶Ø§ÙØ© Caching
- ØªØ­Ø³ÙŠÙ† Database Queries

#### Ø¯. ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø£Ù…Ø§Ù†

- ØªÙØ¹ÙŠÙ„ Security Headers
- Ø¥Ø¶Ø§ÙØ© Rate Limiting
- ØªØ­Ø³ÙŠÙ† Input Validation

### 2. Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© (Medium Priority) ğŸŸ¡

#### Ø£. Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Settings

- Ø¥Ø¶Ø§ÙØ© Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
- Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©

#### Ø¨. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

- Unit Tests
- Integration Tests
- E2E Tests

#### Ø¬. ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ«ÙŠÙ‚

- API Documentation
- User Guide
- Developer Guide

### 3. Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ù†Ø®ÙØ¶Ø© (Low Priority) ğŸŸ¢

#### Ø£. Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

- 2FA
- Dark Mode
- Notifications System
- Export to Excel/PDF

---

## ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

> **ØªØ­Ø¯ÙŠØ«:** ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø·Ø© Ù„ØªØ´Ù…Ù„ Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ù„Ù„Ù€ SaaS Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‚Ø¯ÙŠ.

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS (Ø£Ø³Ø¨ÙˆØ¹Ø§Ù†) ğŸ”´ **Ø­Ø±Ø¬Ø©**

> **Ù…Ù„Ø§Ø­Ø¸Ø©:** Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø© **Ø¥Ù„Ø²Ø§Ù…ÙŠØ©** Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ ÙƒÙ…Ù†ØªØ¬ SaaS. Ø¨Ø¯ÙˆÙ†Ù‡Ø§ØŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„ÙŠØ³ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ù„Ù„Ø¨ÙŠØ¹.

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1: Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin

- [ ] Ø¨Ù†Ø§Ø¡ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin (Ù…Ù†ÙØµÙ„Ø© ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„)
- [ ] Dashboard Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±ÙƒØ§ØªØŒ Ø§Ù„Ø¯Ø®Ù„ØŒ Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª)
- [ ] Ø¥Ø¯Ø§Ø±Ø© Tenants (Ø¥Ù†Ø´Ø§Ø¡ØŒ ØªØ¹Ø¯ÙŠÙ„ØŒ Ø­Ø°ÙØŒ ØªØ¬Ù…ÙŠØ¯)
- [ ] Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ ÙƒÙ„ Ø´Ø±ÙƒØ© ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- [ ] ØªØµÙ…ÙŠÙ… Ø¬Ø¯Ø§ÙˆÙ„ Plans & Subscriptions ÙÙŠ Database

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2: Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„ÙÙˆØªØ±Ø©

- [ ] Ø¥ÙƒÙ…Ø§Ù„ Ù†Ù…Ø§Ø°Ø¬ Plans & Subscriptions
- [ ] ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø© Ø¯ÙØ¹ (Stripe Ø£Ùˆ Moyasar)
- [ ] Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØªØ±Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- [ ] ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
- [ ] Ù…Ø¹Ø§Ù„Ø¬Ø© ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹
- [ ] Subscription Middleware Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
- [ ] Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Trial â†’ Active â†’ Past Due â†’ Cancelled)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© (Ø£Ø³Ø¨ÙˆØ¹Ø§Ù†)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3

- [ ] Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Farm
- [ ] ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- [ ] Ø¥Ø¶Ø§ÙØ© Error Boundary
- [ ] ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4

- [ ] ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø£Ù…Ø§Ù† (Security Headers)
- [ ] Ø¥Ø¶Ø§ÙØ© Rate Limiting
- [ ] ØªØ­Ø³ÙŠÙ† Input Validation
- [ ] Ø¥Ø¶Ø§ÙØ© Token Refresh Mechanism
- [ ] **ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… RBAC Ø§Ù„Ù…ØªÙ‚Ø¯Ù…** (Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ·ÙŠÙ† (Ø£Ø³Ø¨ÙˆØ¹Ø§Ù†)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 5

- [ ] Ø¥Ø¶Ø§ÙØ© Code Splitting
- [ ] Ø¥Ø¶Ø§ÙØ© React Query Ù„Ù„Ù€ Caching
- [ ] ØªØ­Ø³ÙŠÙ† Database Queries
- [ ] Ø¥Ø¶Ø§ÙØ© Database Indexes
- [ ] **ØªÙØ¹ÙŠÙ„ i18n Ø§Ù„ÙƒØ§Ù…Ù„** (react-i18next + Django Translation)
- [ ] Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø© (ar.json, en.json)
- [ ] ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„ÙÙˆØ±ÙŠ

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 6

- [ ] Ø¥Ø¶Ø§ÙØ© Lazy Loading
- [ ] Ø¥Ø¶Ø§ÙØ© Memoization
- [ ] ØªØ­Ø³ÙŠÙ† API Response Times
- [ ] Ø¥Ø¶Ø§ÙØ© API Response Caching
- [ ] **Database i18n** (Ø­Ù‚ÙˆÙ„ name_ar, name_en)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„ (Ø£Ø³Ø¨ÙˆØ¹Ø§Ù†)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 7

- [ ] Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Settings
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- [ ] Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
- [ ] **ØªÙƒØ§Ù…Ù„ ZATCA Ø§Ù„ÙƒØ§Ù…Ù„:**
  - [ ] Ù…ÙƒØªØ¨Ø© ØªÙˆÙ„ÙŠØ¯ QR Code (TLV Base64)
  - [ ] Ø¢Ù„ÙŠØ© ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø®Ø§ØµØ© (Ù…Ø´ÙØ±Ø©)
  - [ ] Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
  - [ ] Ø±Ø¨Ø· Ù…Ø¹ Ù…Ù†ØµØ© ZATCA API

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 8

- [ ] Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª (Unit Tests)
- [ ] Ø¥Ø¶Ø§ÙØ© Integration Tests
- [ ] ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ«ÙŠÙ‚
- [ ] Ø¥Ø¶Ø§ÙØ© User Guide
- [ ] **Ø¥Ø¹Ø¯Ø§Ø¯ CI/CD Pipeline** (GitHub Actions)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø£Ø³Ø¨ÙˆØ¹Ø§Ù†)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 9

- [ ] Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ (Nginx, Gunicorn)
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ SSL/TLS
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Backup Strategy
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Monitoring
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Logging Centralized

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 10

- [ ] Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø©
- [ ] Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ (Load Testing)
- [ ] Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† (Security Audit)
- [ ] Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª (Subscription Flow Testing)
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Deployment
- [ ] **Ø§Ø®ØªØ¨Ø§Ø± Beta Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¡ Ø­Ù‚ÙŠÙ‚ÙŠÙŠÙ†**

---

## ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (KPIs)

### Ø§Ù„Ø£Ø¯Ø§Ø¡ (Performance)

- **Time to First Byte (TTFB):** < 200ms
- **First Contentful Paint (FCP):** < 1.5s
- **Largest Contentful Paint (LCP):** < 2.5s
- **Time to Interactive (TTI):** < 3.5s
- **API Response Time:** < 500ms (95th percentile)

### Ø§Ù„Ø£Ù…Ø§Ù† (Security)

- **Security Headers:** Ø¬Ù…ÙŠØ¹ Headers Ù…ÙØ¹Ù„Ø©
- **Rate Limiting:** 100 requests/minute per user
- **Input Validation:** 100% coverage
- **Authentication:** JWT with Refresh Token

### Ø§Ù„Ø¬ÙˆØ¯Ø© (Quality)

- **Test Coverage:** > 80%
- **Code Quality:** ESLint + Prettier
- **Documentation:** 100% API documented
- **Error Rate:** < 0.1%

---

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

1. **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø© Ù…Ù† Ù†Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©** Ù„ÙƒÙ†Ù‡ **ØºÙŠØ± Ø¬Ø§Ù‡Ø² ÙƒÙ…Ù†ØªØ¬ SaaS**
2. **Ø§Ù„ÙØ¬ÙˆØ© Ø§Ù„Ø­Ø±Ø¬Ø©:** ØºÙŠØ§Ø¨ Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS (Super Admin, Subscriptions, Billing)
3. **Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰:** Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS Ù‚Ø¨Ù„ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±
4. **Ø§Ù„Ø£Ø¯Ø§Ø¡:** ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†Ø§Øª ÙÙŠ Frontend Ùˆ Backend
5. **Ø§Ù„Ø£Ù…Ø§Ù†:** ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø²ÙŠØ² ÙÙŠ Ø¹Ø¯Ø© Ù…Ø¬Ø§Ù„Ø§Øª (RBAC, Security Headers)
6. **Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„:** ZATCA ÙŠØ­ØªØ§Ø¬ ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„ ÙˆÙ„ÙŠØ³ Ù…Ø¬Ø±Ø¯ API
7. **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:** Ø¶Ø±ÙˆØ±ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©

### Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©

#### âœ… Ù„Ù„Ø¨Ø¯Ø¡ Ø§Ù„ÙÙˆØ±ÙŠ (Ù‚Ø¨Ù„ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±):

1. **Ø¨Ù†Ø§Ø¡ Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù€ SaaS:**
   - Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin
   - Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„Ø®Ø·Ø·
   - ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹
   - Subscription Middleware

2. **ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… RBAC Ø§Ù„Ù…ØªÙ‚Ø¯Ù…:**
   - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…Ø®ØµØµØ©
   - Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
   - Audit Trail

#### âœ… Ø«Ù… Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©:

3. Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Farm
4. ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
5. ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø£Ù…Ø§Ù†

#### âœ… Ø«Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª:

6. ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
7. Ø§Ù„ØªÙˆØ·ÙŠÙ† Ø§Ù„ÙƒØ§Ù…Ù„ (i18n)
8. ØªÙƒØ§Ù…Ù„ ZATCA Ø§Ù„ÙƒØ§Ù…Ù„

### ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©

#### Ù‡Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ (Beta)ØŸ

**Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‡Ø¯Ù:** ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© Ù…Ø¹ Ø¹Ù…ÙŠÙ„ ÙˆØ§Ø­Ø¯
- âœ… **Ù†Ø¹Ù…** - ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ ØµÙØ­Ø© Farm ÙˆØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

**Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‡Ø¯Ù:** Ø¨ÙŠØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒÙ…Ù†ØªØ¬ SaaS Ù„Ø¹Ø¯Ø© Ø´Ø±ÙƒØ§Øª
- âŒ **Ù„Ø§** - Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙØªÙ‚Ø± Ù„Ø¢Ù„ÙŠØ© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ
- **Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:** Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0 (Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS) Ø£ÙˆÙ„Ø§Ù‹
- **Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù‚Ø¯Ø±:** Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† Ø¥Ø¶Ø§ÙÙŠØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„

### Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

- âœ… **Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0 (Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS)** - Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚
- âœ… Ø«Ù… Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1)
- âœ… Ø«Ù… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ·ÙŠÙ† (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)
- âœ… Ø«Ù… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„ (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3)
- âœ… ÙˆØ£Ø®ÙŠØ±Ø§Ù‹ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4)

### Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø§Ù„Ù…Ù‚ØªØ±Ø­ (Ù…Ø­Ø¯Ø«)

- **10 Ø£Ø³Ø§Ø¨ÙŠØ¹** Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª (Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS)
- **2 Ø£Ø³Ø§Ø¨ÙŠØ¹** Ù„Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS (Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚)
- **4 Ø£Ø³Ø§Ø¨ÙŠØ¹** Ù„Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- **4 Ø£Ø³Ø§Ø¨ÙŠØ¹** Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø±Ø§Ø­Ù„

| Ø§Ù„Ù…Ø±Ø­Ù„Ø© | Ø§Ù„Ù…Ø¯Ø© | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© | Ø§Ù„Ø­Ø§Ù„Ø© |
|---------|------|----------|--------|
| **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 0: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ù€ SaaS** | Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† | ğŸ”´ Ø­Ø±Ø¬Ø© | âŒ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© | Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† | ğŸ”´ Ø¹Ø§Ù„ÙŠØ© | âš ï¸ Ø¬Ø²Ø¦ÙŠØ© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ·ÙŠÙ† | Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† | ğŸŸ¡ Ù…ØªÙˆØ³Ø·Ø© | âš ï¸ Ø¬Ø²Ø¦ÙŠØ© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„ | Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† | ğŸ”´ Ø¹Ø§Ù„ÙŠØ© | âš ï¸ Ø¬Ø²Ø¦ÙŠØ© |
| Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© | Ø£Ø³Ø¨ÙˆØ¹Ø§Ù† | ğŸŸ¢ Ù…Ù†Ø®ÙØ¶Ø© | âŒ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø© |

---

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«

**Ø§Ù„ØªØ­Ø¯ÙŠØ«:** ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ Ø§Ù„Ø°ÙŠ Ø£Ø´Ø§Ø± Ø¥Ù„Ù‰:
- ØºÙŠØ§Ø¨ Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ù„Ù…Ù†ØªØ¬ SaaS
- Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ø·Ø¨Ù‚Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ÙˆØ§Ù„ÙÙˆØªØ±Ø©
- ØªØ­Ø³ÙŠÙ† Ù†Ø¸Ø§Ù… RBAC ÙˆØ§Ù„ØªÙˆØ·ÙŠÙ†
- Ø¥ÙƒÙ…Ø§Ù„ ØªÙƒØ§Ù…Ù„ ZATCA

**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0 (Ù…Ø­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ù„Ù„Ù€ SaaS)

---

**ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©:** Ø®Ø¨ÙŠØ± ØªÙ‚Ù†ÙŠ ÙˆÙ…Ø¨Ø±Ù…Ø¬ Ù…Ø­ØªØ±Ù  
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** Ø¯ÙŠØ³Ù…Ø¨Ø± 2025  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0 (Ù…Ø­Ø¯Ø«)
